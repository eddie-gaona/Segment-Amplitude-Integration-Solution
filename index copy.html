<html>    
    <header>
        <title>Segment EXAMPLE</title>
        <script>
          !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.13.1";
          analytics.load("uUC2dDHmdMbfcd4LMjSa7fhMySFEA600");
          analytics.page();
          }}();
        </script>
    </header>

    <body>
        <h1>Log events via the JS SDK!</h1>
        
        <p id="currentUser">There is no user logged in! This program logs events as Anonymous when there is no user logged in.</p>
        
        <p><label for="fname">Full name:</label><br>
        <input type="text" id="UserID" name="fname"/>
            
        <p><label>Favorite food:</label><br>
            <input type="text" id="favfood"/></p>
        
        <p><label>Age:</label><br>
            <input type="text" id="age"/></p>
        </p>
    
         <p><label>Color of your current shirt:</label><br>
            <input type="text" id="color"/></p>
    
        <p><label>Day of the week:</label><br>
            <input type="text" id="day"/></p>
    
        <button onclick="setUserID()">Log In</button>
    
        <p><button onclick="logevent()">Log event 1</button>
        <button onclick="logevent2()">Log event 2</button>
        <button onclick="logevent3()">Log event 3</button>
        <p id="event">No events have been logged...</p></p>
    
        <p>
            <label for="cars">Purchase an item:</label>
            <select name="item" id="items">
                <option value="socks">Socks</option>
                <option value="Playstation 5">Playstation 5</option>
                <option value="bananas">Banana</option>
                <option value="earrings">Earrings</option>
            </select>
            <br><br>
            <label for="amount">Quantity:</label>
            <select name="quantities" id="quantity">
                <option value=1>1</option>
                <option value=2>2</option>
                <option value=3>3</option>
                <option value=4>4</option>
            </select>
            <p id="purchase">No items have been purchased... :(</p>
            <button onclick="item()">Purchase</button>
        </p>    
    
        <p>
            <button onclick="logOut()">Log Out</button>
        </p> 

    <script>
        
        var now = Date.now();
        console.log(now);
                
        function setUserID() {
            var user = document.getElementById("UserID").value; //Gets the Full Name inputted by the user in the "user" variable
            var anon = analytics.user().anonymousId(); //Segment has an anonymousID which "anon" variable captures
            
            document.getElementById("currentUser").innerHTML = user + " is logged in!";
            
            if(user != "") {
                analytics.identify(user, {
                    anonymousId: analytics.user().anonymousId(),
                    age: document.getElementById("age").value,
                    favFood: document.getElementById("favfood").value
                });
                //Add the analytics.identify function here where the variable "user" should be the User ID
            }
            else if(user == "") {
                
                analytics.identify(null, {
                    age: document.getElementById("age").value,
                    favFood: document.getElementById("favfood").value
                });
                //Add the analytics.identify function here where "null" will be the User ID (anonymous)
            }
            
            analytics.track('Logged In', {
                plan: 'Enterprise'
            });
            //Log an event when the Log In button is clicked
        }
        
        function logevent() {
        	document.getElementById("event").innerHTML = document.getElementById("UserID").value +  " logged event 1!";

            var color = document.getElementById("color").value;
            var day = document.getElementById("day").value;

            //Log an event using the analytics.track function along with the event properties color and day
             analytics.track("Log Event 1", {
                ColorShirt: color,//What is the value of ColorShirt? Hint: a property above is holding this information.
                Day: day //What is the value of Day? Hint: a property above is holding this information.
            }, {
               "Amplitude": {
                   "session_id": now
               }
            });
        }
        
        function logevent2() {
			document.getElementById("event").innerHTML = document.getElementById("UserID").value +  " logged event 2!";

            var color = document.getElementById("color").value;
            var day = document.getElementById("day").value;

            //Log an event using the analytics.track function along with the event properties color and day 
            analytics.track("Log Event 2", {
                ColorShirt: color, //What is the value of ColorShirt? Hint: a property above is holding this information.
                Day: day //What is the value of Day? Hint: a property above is holding this information.
            }, {
                "Amplitude": {
                    "session_id": now
                }
            });
        }
        
        function logevent3() {
            document.getElementById("event").innerHTML = document.getElementById("UserID").value +  " logged event 3!";

            var color = document.getElementById("color").value;
            var day = document.getElementById("day").value;

            //Log an event using the analytics.track function along with the event properties color and day
            analytics.track("Log Event 3", {
                ColorShirt: color, //What is the value of ColorShirt? Hint: a property above is holding this information.
                Day: day //What is the value of Day? Hint: a property above is holding this information.
            }, {
               "Amplitude": {
                   "session_id": now
               }
            });
        }

        function item() {

        document.getElementById("purchase").innerHTML = "Thank you for purchasing " + document.getElementById("items").value + "!";
        var name = document.getElementById("items").value; //The name of the item
        var cost = 1; //This is the price of the item depending which one is chosen. For example if in the website Socks is chosen then cost would equal 8.99.
        var numOfItems = document.getElementById("quantity").value; //The quantity of the item

        if(name == "Playstation 5") {
            cost = 499.99
        }
        else if(name == "socks") {
            cost = 8.99
        }
        else if(name == "bananas") {
            cost = 0.54
            console.log(cost);
        }
        else if(name == "earrings") {
            cost = 97.99
        }

        //Log Revenue event include event properties such as productId, quantity, price, revenueType
        analytics.track("Purchased Item", {
            productId: name, //The name of the product goes here. Hint: There is a variable keeping track of this. Which one is it?
            quantity: numOfItems, //The number of items being purchased. Hint: There is a variable keeping track of this. Which one is it?
            price: cost, //The cost of the item. Hint: There is a variable keeping track of this. Which one is it?
            revenueType: "income",
            revenue: cost * parseInt(numOfItems)
        }, {
        "Amplitude": {
            "session_id": now
        } 
        });
        }
        
        function logOut() {
            //Log a Log out event with no event properties
            analytics.track("Logged Out", {
                
            },{
                "Amplitude": {
                    "session_id": now
                }
            });
            analytics.reset()
            
            document.getElementById("event").innerHTML = "No events have been logged...";
            document.getElementById("UserID").value = "";
            document.getElementById("favfood").value = "";
            document.getElementById("age").value = "";
            document.getElementById("color").value = "";
            document.getElementById("day").value = "";
            document.getElementById("currentUser").innerHTML = "There is no user logged in! This program logs events as Anonymous when there is no user logged in.";
        }
    

    </script>
    </body>
</html>